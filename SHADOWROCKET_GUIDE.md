# Shadowrocket 使用指南

详细的Shadowrocket客户端配置和使用说明。

## 简介

Shadowrocket是一款功能强大的iOS网络代理客户端，支持多种代理协议，包括V2Ray/VMess、Trojan、SS等。

## 下载与安装

### 方法1: App Store下载

- 地区: 需要非中国大陆地区的Apple ID
- 价格: $2.99 (可能会变动)
- 搜索: Shadowrocket

### 方法2: TestFlight测试版

1. 加入TestFlight测试计划
2. 安装测试版本

## 配置导入

### 方式1: 通过vmess://链接导入（推荐）

1. 复制部署生成的vmess://链接
2. 打开Shadowrocket
3. 点击右上角 `+` 按钮
4. 类型选择 `VMess`
5. 将链接粘贴到URL输入框
6. 点击右上角 `完成`

### 方式2: 扫描二维码导入

1. 使用相机扫描部署生成的二维码
2. Shadowrocket会自动识别并导入配置

### 方式3: 手动配置

1. 打开Shadowrocket
2. 点击右上角 `+` 按钮
3. 类型选择 `VMess`
4. 填写配置参数：

```
地址: ttjj11233.duckdns.org
端口: 443
用户ID: UUID（从部署输出中获取）
alterId: 0
加密方式: auto
传输协议: ws
路径: /v2ray
TLS: 开启
```

5. 点击右上角 `完成`

## 配置验证

导入配置后，验证配置是否正确：

1. 找到导入的配置节点
2. 点击节点右侧的 `i` 图标
3. 检查配置参数是否正确：

```
服务器: ttjj11233.duckdns.org
端口: 443
加密: auto
传输: WebSocket + TLS
```

4. 返回主界面
5. 点击节点名称右侧的开关，启用配置
6. 开关变为绿色表示已启用

## 连接测试

### 测试网络连接

1. 启用Shadowrocket配置
2. 打开Safari浏览器
3. 访问 https://www.google.com

如果能够正常访问，说明配置成功。

### 测试IP地址

访问以下网站查看当前IP：

- https://ip.sb
- https://www.ipip.net

显示的IP应该是服务器的公网IP `66.42.124.79`

### 查看连接日志

1. 打开Shadowrocket
2. 点击右下角 `日志` 图标
3. 查看连接日志，确认没有错误信息

## 高级配置

### 规则设置

Shadowrocket支持自定义路由规则，选择性使用代理。

#### 分流规则

编辑节点配置，添加规则：

```
域名规则:
- geosite:cn -> 直连
- geosite:geolocation-!cn -> 代理

IP规则:
- geoip:cn -> 直连
- geoip:!cn -> 代理
```

#### 应用分流

设置特定应用使用代理：

1. 配置 -> 使用规则
2. 添加应用规则
3. 选择需要代理的应用

### DNS配置

优化DNS解析，避免DNS污染：

```
DoH服务器:
- https://dns.google/dns-query
- https://cloudflare-dns.com/dns-query

DoT服务器:
- tls://dns.google
- tls://1.1.1.1
```

### 订阅管理

如果配置了订阅更新：

1. 配置 -> 订阅
2. 添加订阅URL
3. 设置自动更新时间
4. 点击更新获取最新配置

## 常用功能

### 1. 网络延迟测试

点击节点右侧的 `i` 图标 -> 点击 `延迟测试`

### 2. 流量统计

查看各节点的流量使用情况：

1. 配置 -> 流量统计
2. 查看上传/下载流量

### 3. 配置分享

导出配置分享给其他设备：

1. 长按节点
2. 选择 `分享`
3. 选择分享方式

### 4. 模式切换

Shadowrocket提供多种模式：

- **自动模式**: 根据规则智能分流
- **直连模式**: 所有流量不经过代理
- **全局模式**: 所有流量经过代理
- **规则模式**: 使用自定义规则

## 故障排查

### 问题1: 无法连接

**检查清单**:
- [ ] 确认Shadowrocket配置已启用
- [ ] 检查服务器V2Ray服务是否运行
- [ ] 验证域名DNS解析是否正确
- [ ] 确认防火墙端口已开放
- [ ] 查看Shadowrocket连接日志

**解决步骤**:
1. 关闭再重新启用Shadowrocket配置
2. 切换网络（Wi-Fi -> 4G -> Wi-Fi）
3. 更新Shadowrocket到最新版本
4. 重新导入配置

### 问题2: 连接速度慢

**可能原因**:
- 服务器带宽限制
- 网络质量差
- 服务器负载高

**解决方法**:
1. 更换节点服务器
2. 使用其他网络环境
3. 检查服务器负载和带宽使用

### 问题3: 部分网站无法访问

**可能原因**:
- 规则配置错误
- DNS污染

**解决方法**:
1. 切换到全局模式测试
2. 修改DNS配置为DoH/DoT
3. 更新规则订阅

### 问题4: 频繁断线

**可能原因**:
- 网络不稳定
- 服务器配置问题

**解决方法**:
1. 修改心跳间隔时间
2. 更换网络环境
3. 检查服务器V2Ray配置

## 安全建议

### 1. 定期更新配置

- 定期更新V2Ray配置
- 更新Shadowrocket到最新版本
- 轮换UUID（修改服务器配置）

### 2. 避免泄露配置

- 不要分享vmess://链接
- 不要截图显示完整配置
- 定期更换密码

### 3. 注意隐私保护

- 不要在公共Wi-Fi下使用
- 定期检查流量统计
- 注意应用权限设置

## 常用URL和资源

### 测试网站

- Google: https://www.google.com
- YouTube: https://www.youtube.com
- Twitter: https://twitter.com
- IP查询: https://ip.sb

### 配置资源

- V2Ray官方文档: https://www.v2fly.org
- Shadowrule规则集: https://github.com/DivineEngine/Shadowrocket-Rule

### 社区支持

- GitHub Issues
- Reddit r/shadowrocket
- Telegram群组

## 性能优化

### 1. 选择合适的服务器

- 选择延迟低的服务器
- 考虑服务器带宽和负载
- 避开高峰时段使用

### 2. 优化Shadowrocket设置

- 关闭不必要的规则
- 使用简洁的规则集
- 定期清理缓存

### 3. 网络优化

- 使用稳定的Wi-Fi连接
- 避免网络拥堵时段
- 关闭其他占用带宽的应用

## 多设备使用

### 同步配置

Shadowrocket不支持云同步，需要手动配置：

1. 在设备A上导出配置
2. 通过AirDrop或其他方式分享
3. 在设备B上导入配置

### 多人使用

服务器配置支持添加多个UUID：

编辑服务器上的V2Ray配置：

```json
{
  "clients": [
    {"id": "UUID-1", "alterId": 0},
    {"id": "UUID-2", "alterId": 0},
    {"id": "UUID-3", "alterId": 0}
  ]
}
```

重启V2Ray服务：

```bash
systemctl restart v2ray
```

## 免责声明

本工具仅供学习和研究使用。使用者需遵守当地法律法规，不得用于任何非法用途。作者不对使用本工具造成的任何后果负责。

## 技术支持

如遇到问题，请：

1. 查看本文档的故障排查部分
2. 检查服务器日志
3. 使用健康检查脚本诊断
4. 联系技术支持
